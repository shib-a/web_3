<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
<head>
    <link rel="stylesheet" href="main_style.css"/>
</head>
<body>
<f:view>
    <h:head>
    </h:head>
    <h:body>
        <div class="base">
        <header class="main_header">
            <h1 id="h1">Мартышов Данила Викторович, Р3207, Вариант 409091</h1>
        </header>
        <h:form id="data" action="get">
            <div class="q_entry">
                <div>
                    <label>Изменение X</label>
                </div>
                <p:slider for="ch_x" minValue="-5" maxValue="5" step="1" />
                <p:inputText id="ch_x" value="#{pointBean.x}"/>
            </div>
            <div class="q_entry">
                <div><label>Изменение Y</label></div>
                <h:inputText type="text" name="ch_y" placeholder="-5..5" id="data_ch_y" value="#{pointBean.y}">
                    <f:validateLongRange minimum="-5" maximum="5"/>
                </h:inputText>
            </div>
            <div class="q_entry" id='r_choice'>
                <div>
                    <label>Изменение R</label>
                </div>
                <p:slider id="ch_r_slider" onSlideEnd="redraw()" for="ch_r" minValue="1" maxValue="4" step="0.25" />
                <p:inputText id="ch_r" value="#{pointBean.r}"/>
            </div>
            <h:commandButton id="submit_button" value="Submit" action="#{pointListBean.handle}">
                <f:ajax execute="@this" render="@form"/>
            </h:commandButton>
        </h:form>
            <div id="graph_div">
            <canvas id="graph" width="400" height="400"></canvas>
            </div>
            <h:dataTable id="table" value="#{pointListBean.pointList}" var="point">
                <h:column>
                    <f:facet name="header" class="t_d">x</f:facet>
                    #{point.x}
                </h:column>
                <h:column>
                    <f:facet name="header" class="t_d">y</f:facet>
                    #{point.y}
                </h:column>
                <h:column>
                    <f:facet name="header" class="t_d">r</f:facet>
                    #{point.r}
                </h:column>
                <h:column>
                    <f:facet name="header" class="t_d">hit</f:facet>
                    #{point.hit}
                </h:column>
            </h:dataTable>
        <h:form id="goBackForm">
            <h:commandButton id="redirectButton" value="Go back" action="index"/>
        </h:form>
        </div>
    </h:body>
</f:view>
<script type="application/javascript" src="graph.js"/>
</body>
</html>
